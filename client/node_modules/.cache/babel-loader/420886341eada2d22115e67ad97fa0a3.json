{"ast":null,"code":"var _jsxFileName = \"C:\\\\OnlineBanking\\\\mern-project\\\\client\\\\src\\\\pages\\\\user\\\\UserTransfers.jsx\",\n    _s = $RefreshSig$();\n\nimport { Link, Navigate } from \"react-router-dom\";\nimport { useBalance } from \"../../hooks/balance.hook\";\nimport { AuthContext } from \"../../context\";\nimport { useContext } from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useHttp } from \"../../hooks/http.hook\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const UserTransfers = () => {\n  _s();\n\n  const {\n    isAuth,\n    userId\n  } = useContext(AuthContext);\n  const {\n    balance,\n    changeBalance,\n    currency,\n    changeCurrency\n  } = useBalance();\n  const [form, setForm] = useState({\n    email: \"\",\n    balance: \"0,00 \" + currency\n  });\n  const {\n    request,\n    setError\n  } = useHttp();\n  useEffect(() => {\n    const balanceInput = document.getElementById('balance');\n    balanceInput.value = form.balance;\n  }, [form]);\n\n  const formChange = event => {\n    let value = event.target.value;\n\n    if (event.target.id === \"balance\") {\n      changeBalance(value);\n      value = balance + \" \" + currency;\n    }\n\n    form[event.target.id] = value;\n    event.target.value = form[event.target.id];\n  };\n\n  const transferHandler = async event => {\n    event.preventDefault();\n\n    if (Object.values(form).includes(\"\")) {\n      setError(\"All fields must be filled\");\n      return;\n    }\n\n    const balanceInput = document.getElementById('balance');\n\n    if (balanceInput.value !== 'USD') {\n      changeBalance(form.balance);\n      form.balance = balance + \" \" + currency;\n    }\n\n    if (event.target.innerText === 'TRANSFER') {\n      await request('/api/transactions/transfer', 'POST', {\n        userId,\n        type: 'TRANSFER',\n        email: form.email,\n        sum: form.balance\n      });\n    } else if (event.target.innerText === 'LEND') {\n      await request('/api/transactions/lend', 'POST', {\n        userId,\n        type: 'LEND',\n        email: form.email,\n        sum: form.balance\n      });\n    }\n  };\n\n  if (!isAuth) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/user/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      style: {\n        paddingLeft: \"10rem\",\n        paddingRight: \"10rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Transfer money\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"col s12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          onChange: formChange,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-field\",\n            style: {\n              marginTop: '50px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-field col s12\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"email\",\n                type: \"text\",\n                className: \"validate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                children: \"User email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-field col s12\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"balance\",\n                type: \"text\",\n                className: \"validate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"balance\",\n                children: \"Sum\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  onClick: changeCurrency,\n                  id: \"USD\",\n                  className: \"with-gap\",\n                  name: \"group3\",\n                  type: \"radio\",\n                  defaultChecked: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"USD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  onClick: changeCurrency,\n                  id: \"ILS\",\n                  className: \"with-gap\",\n                  name: \"group3\",\n                  type: \"radio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"ILS\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/user/transactions\",\n            children: \"Transactions history\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-action center-align\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: transferHandler,\n              id: \"changebtn\",\n              style: {\n                margin: \"20px\"\n              },\n              className: \"waves-effect waves-light btn\",\n              children: \"TRANSFER\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: transferHandler,\n              id: \"changebtn\",\n              style: {\n                margin: \"20px\"\n              },\n              className: \"waves-effect waves-light btn\",\n              children: \"LEND\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(UserTransfers, \"Cl6w6EOp0IsSdj3/YxhfPHp+G8c=\", false, function () {\n  return [useBalance, useHttp];\n});\n\n_c = UserTransfers;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserTransfers\");","map":{"version":3,"names":["Link","Navigate","useBalance","AuthContext","useContext","useEffect","useState","useHttp","UserTransfers","isAuth","userId","balance","changeBalance","currency","changeCurrency","form","setForm","email","request","setError","balanceInput","document","getElementById","value","formChange","event","target","id","transferHandler","preventDefault","Object","values","includes","innerText","type","sum","paddingLeft","paddingRight","marginTop","margin"],"sources":["C:/OnlineBanking/mern-project/client/src/pages/user/UserTransfers.jsx"],"sourcesContent":["import { Link, Navigate } from \"react-router-dom\"\r\nimport { useBalance } from \"../../hooks/balance.hook\"\r\nimport { AuthContext } from \"../../context\"\r\nimport { useContext } from \"react\"\r\nimport { useEffect } from \"react\"\r\nimport { useState } from \"react\"\r\nimport { useHttp } from \"../../hooks/http.hook\"\r\n\r\n\r\nexport const UserTransfers = () => {\r\n    const { isAuth, userId } = useContext(AuthContext)\r\n    const { balance, changeBalance, currency, changeCurrency } = useBalance()\r\n    const [form, setForm] = useState({\r\n        email: \"\",\r\n        balance: \"0,00 \" + currency\r\n    })\r\n    const { request, setError } = useHttp()\r\n\r\n    useEffect(() => {\r\n        const balanceInput = document.getElementById('balance')\r\n        balanceInput.value = form.balance\r\n    }, [form])\r\n    \r\n    \r\n    const formChange = event => {\r\n        let value = event.target.value\r\n        if (event.target.id === \"balance\"){\r\n            changeBalance(value)\r\n            value = balance + \" \" + currency\r\n        }\r\n        form[event.target.id] = value\r\n        event.target.value = form[event.target.id]\r\n    }\r\n\r\n    const transferHandler = async event => {\r\n        event.preventDefault()\r\n        if (Object.values(form).includes(\"\")){\r\n            setError(\"All fields must be filled\")\r\n            return\r\n        }\r\n        const balanceInput = document.getElementById('balance')\r\n        if (balanceInput.value !== 'USD'){\r\n            changeBalance(form.balance)\r\n            form.balance = balance + \" \" + currency\r\n        }\r\n        if (event.target.innerText === 'TRANSFER') {\r\n            await request('/api/transactions/transfer', 'POST', {\r\n                userId,\r\n                type: 'TRANSFER',\r\n                email: form.email,\r\n                sum: form.balance,\r\n            })\r\n        } else if (event.target.innerText === 'LEND'){\r\n            await request('/api/transactions/lend', 'POST', {\r\n                userId,\r\n                type: 'LEND',\r\n                email: form.email,\r\n                sum: form.balance\r\n            })\r\n        }\r\n    }\r\n\r\n    if (!isAuth){\r\n        return <Navigate to=\"/user/login\"/>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"row\" style={{paddingLeft: \"10rem\", paddingRight: \"10rem\"}}>\r\n                <h1>Transfer money</h1>\r\n                <form className=\"col s12\">\r\n                    <div className=\"row\" onChange={formChange}>\r\n                        <div className=\"input-field\" style={{marginTop: '50px'}}>\r\n                            <div className=\"input-field col s12\">\r\n                                <input id=\"email\" type=\"text\" className=\"validate\"/>\r\n                                <label htmlFor=\"email\">User email</label>\r\n                            </div>\r\n                            <div className=\"input-field col s12\">\r\n                                <input id=\"balance\" type=\"text\" className=\"validate\"/>\r\n                                <label htmlFor=\"balance\">Sum</label>\r\n                            </div>\r\n                            <p>\r\n                                <label>\r\n                                    <input onClick={changeCurrency} id=\"USD\" className=\"with-gap\" name=\"group3\" type=\"radio\" defaultChecked/>\r\n                                    <span>USD</span>\r\n                                </label>\r\n                            </p>\r\n                            <p>\r\n                                <label>\r\n                                    <input onClick={changeCurrency} id=\"ILS\" className=\"with-gap\" name=\"group3\" type=\"radio\"/>\r\n                                    <span>ILS</span>\r\n                                </label>\r\n                            </p>\r\n                        </div>\r\n                        <Link to=\"/user/transactions\">Transactions history</Link>\r\n                        <div className=\"card-action center-align\">\r\n                            <button onClick={transferHandler} id=\"changebtn\" style={{margin: \"20px\"}} className=\"waves-effect waves-light btn\">TRANSFER</button>\r\n                            <button onClick={transferHandler} id=\"changebtn\" style={{margin: \"20px\"}} className=\"waves-effect waves-light btn\">LEND</button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}